webpackJsonp(["editorEventsMiddleware"],{1670:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(1671)),i=a(n(1672)),r=a(n(1673)),u=n(857);t.default=function(){(0,i.default)(),mixpanel.disable(u.DISABLED_EVENTS);var e=(0,o.default)();return(0,r.default)(e),{middleware:function(t){return function(n){return function(a){return e.emit(a.type,t,mixpanel,a),n(a)}}},destroyListeners:function(){return e.off()}}}},1671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e={_allEvents:Object.create(null),use:function(t,n){return t(e,n)||e},on:function(t,n,a){var o=e._allEvents[t]||(e._allEvents[t]=[]),i=a?function a(){a.called||(e.off(t,a),n.apply(n,arguments),a.called=!0)}:n;return i.__sourceString=n.toString(),o.push(i),e},once:function(t,n){return e.on(t,n,!0),e},off:function(t,n){if(n&&e._allEvents[t]){var a=n.toString();e._allEvents[t]=e._allEvents[t].filter(function(e){return e.__sourceString!==a})}else t?e._allEvents[t]=[]:e._allEvents=Object.create(null);return e},emit:function(t){if("*"!==t){var n=[].slice.call(arguments);(e._allEvents[t]||[]).map(function(e){e.apply(e,n.slice(1))}),(e._allEvents["*"]||[]).map(function(e){e.apply(e,n)})}return e}};return e}},1672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!document.getElementById("MIXPANEL_SCRIPT")){var e=document.createElement("script");e.id="MIXPANEL_SCRIPT",e.type="text/javascript",e.innerHTML='(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,\n\t0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");\n\tfor(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\\/\\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);\n\tmixpanel.init("4c861d2549b7ac5f0e4232ffb8285470", {debug: false, autotrack: false});\n',document.body.appendChild(e)}}},1673:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(1674)),i=a(n(1676)),r=a(n(1677)),u=a(n(1679)),l=a(n(1680)),c=a(n(1681)),d=a(n(1682)),f=a(n(1683));t.default=function(e){(0,o.default)(e),(0,i.default)(e),(0,r.default)(e),(0,u.default)(e),(0,c.default)(e),(0,l.default)(e),(0,d.default)(e),(0,f.default)(e)}},1674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(1675),i=(a=o)&&a.__esModule?a:{default:a};t.default=function(e){e.once("*",function(e,t,n){var a=(0,i.default)(t.getState());n.identify(a)})}},1675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.auth.user.id}},1676:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(579),i=a(n(653)),r=a(n(926)),u=n(857),l=(0,r.default)(),c=function(e,t){var n=e.getState();t.track(u.TRACK_USER_SAVE,Object.assign({ingredients:(0,i.default)(n)},l(n)))};t.default=function(e){e.on(o.ON_REQUEST_SAVE,c)}},1677:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(189),i=a(n(1678)),r=n(563),u=n(857),l=n(579),c=a(n(926)),d=n(195),f=(0,c.default)(),_=(0,i.default)(function(e,t,n){n.meta.changedBy===r.CHANGED_BY_EDITING&&t.track(u.TRACK_EDIT_LOGO,Object.assign({ingredients:n.payload.ingredients},f(e.getState())))},{every:1}),s=(0,o.debounce)(_,800),p=(0,i.default)(function(e,t,n){var a=e.getState();(0,d.logToTracking)(u.TRACK_EDIT_LOGO,{logoId:a.location.payload.logoid,userId:a.auth.user.id,featureType:a.editor.editState.editedFeatureType,featureKey:a.editor.editState.editedFeatureKey,editName:n.payload.fn.name})},{every:1}),v=(0,o.debounce)(p,800);t.default=function(e){e.on(l.ON_DRAW_LOGO_WITH_UPDATE_INGREDIENTS,s),e.on(l.ON_UPDATE_LOGO,v)}},1678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.every,a=void 0===n?1:n,o=t.debug,i=void 0!==o&&o,r=0;return function(){r%a==0?e.apply(void 0,arguments):i&&console.log("Skipping invocation, count",r),r+=1}}},1679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(579),o=n(563),i=n(857),r=n(195),u=function(e,t,n){if(n.meta.changedBy===o.CHANGED_BY_VARIATIONS){var a=e.getState();(0,r.logToTracking)(i.TRACK_SELECT_VARIATION,{userId:a.auth.user.id,logoId:a.editor.logo.id,feature:n.meta.featureType,variation:n.meta.variationType})}},l=function(e,t,n){if(n.type===a.ON_REQUEST_VARIATIONS){var o=e.getState();(0,r.logToTracking)(i.TRACK_REQUEST_VARIATIONS,{userId:o.auth.user.id,logoId:o.editor.logo.id,variation:n.payload.variationType,featureType:n.payload.featureKey})}};t.default=function(e){e.on(a.ON_DRAW_LOGO_WITH_UPDATE_INGREDIENTS,u),e.on(a.ON_REQUEST_VARIATIONS,l)}},1680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(563),i=n(579),r=n(746),u=(0,((a=r)&&a.__esModule?a:{default:a}).default)(),l=function(e){return e.map(function(e){return e.hex})},c=function(e,t,n){if(n.meta.variationType===o.COLOR_VARIATION_TYPE){var a=e.getState(),c=l((0,r.selectColors)(n.payload.ingredients,!0)),d=l(u(a));c.filter(function(e){return d.indexOf(e)<0}).forEach(function(t){e.dispatch({type:i.ON_RECENT_COLOR,payload:t})})}};t.default=function(e){e.on(i.ON_DRAW_LOGO_WITH_UPDATE_INGREDIENTS,c)}},1681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(590),i=n(815),r=n(563),u=n(991),l=(a=u)&&a.__esModule?a:{default:a},c=n(579),d=function(e,t,n){if(n.meta.variationType===r.ICONS_VARIATION_TYPE){var a=(0,o.getFeature)(n.payload.ingredients,function(e,t){return"symbol"===t.type&&t.data.id}).feature;if(a){var u=a.data.id,d=(0,i.addRecentIcon)((0,l.default)(e.getState()),u);e.dispatch({type:c.ON_UPDATE_CONFIG,payload:d})}}};t.default=function(e){e.on(c.ON_DRAW_LOGO_WITH_UPDATE_INGREDIENTS,d)}},1682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(579),i=n(857),r=n(926),u=(0,((a=r)&&a.__esModule?a:{default:a}).default)(),l=function(e,t,n){var a=i.TRACK_REMOVE_FEATURE[n.payload];t.track(a,Object.assign({},u(e.getState())))};t.default=function(e){e.on(o.ON_RECEIVE_REMOVE_FEATURE,l)}},1683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(579),i=n(857),r=n(926),u=(0,((a=r)&&a.__esModule?a:{default:a}).default)(),l=function(e,t){t.track(i.TRACK_HIDE_VARIATIONS_POPUP_TOOLTIP,Object.assign({},u(e.getState())))};t.default=function(e){e.on(o.HIDE_VARIATIONS_POPUP_TOOLTIP,l)}},857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRACK_SELECT_VARIATION="select-variation",t.TRACK_REQUEST_VARIATIONS="request-variations",t.TRACK_EDIT_LOGO="edit-logo",t.TRACK_USER_SAVE="user-save";var a=t.TRACK_VARIATIONS_DRAW_TIMING="variations-drawn",o=t.TRACK_VARIATIONS_RESPONSE_TIMING="variations-responded";t.TRACK_HIDE_VARIATIONS_POPUP_TOOLTIP="hide-variations-popup-tooltip",t.DISABLED_EVENTS=[o,a],t.TRACK_REMOVE_FEATURE={removeSymbol:"remove-symbol",removeContainer:"remove-container"}},926:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).date,t=void 0===e?Date.now():e;return function(e){return{logoId:(a=e,a.location.payload.logoid),userId:(n=e,n.auth.user.id),event_on:t};var n,a}}}});
//# sourceMappingURL=editorEventsMiddleware.logojoy-app.js.map